# 220420 동시성제어

# 1. 동시성제어가 뭘까

### 개요

- 여러 사용자가 동시에 작업한 뒤 데이터베이스에 데이터를 저장했을 경우, 어떠한 형태로든 데이터 손실이 일어나는 것을 방지하는 용도.
- 한 명이 작업을 하고 있을 때는 다른 사람이 작업할 수 없도록 하는 것이 대표적.

### 활용처

- 데이터를 사용하는 거의 모든 곳
- 데이터 정합성의 중요도에 따라 동시성제어의 강도가 다름

# 2. 동시성제어의 종류

## 비관적 동시성제어

- 한 사용자가 데이터 수정을 시작하면 그 시점부터 수정 종료 시까지 Lock을 걺.
- Lock이 걸리면 다른 사용자는 데이터 수정을 시도할 수 없음.
- 데이터 정합성이 신속성보다 중요할 때 사용.
    - 프로그램이 Lock 상태 데이터의 수정을 반복해서 시도할 경우 성능 저하가 발생하기 때문
    - 이때 무한정 대기시키는 것이 아니라 처리를 종료시키는 것으로 성능 저하 회피 가능

## 낙관적 동시성제어

- 데이터 수정을 시도할 때는 동시성을 검사하지 않고, 수정사항을 데이터베이스에 반영할 때 확인작업을 함.
- Timestamp/Datetime 등을 활용한 갱신일시나, Int 등을 활용한 버전 데이터로 구현.
- 나무위키 문서의 편집 반영 방식이 이거 같은데?